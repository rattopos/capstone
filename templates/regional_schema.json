{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "시도별 경제동향 보도자료 스키마",
  "description": "17개 시도별 경제동향 통계 보도자료 생성을 위한 데이터 스키마",

  "definitions": {
    "region_codes": {
      "description": "17개 시도 코드 매핑",
      "type": "object",
      "properties": {
        "서울": 11,
        "부산": 21,
        "대구": 22,
        "인천": 23,
        "광주": 24,
        "대전": 25,
        "울산": 26,
        "세종": 29,
        "경기": 31,
        "강원": 32,
        "충북": 33,
        "충남": 34,
        "전북": 35,
        "전남": 36,
        "경북": 37,
        "경남": 38,
        "제주": 39
      }
    },

    "region_full_names": {
      "description": "시도 전체 명칭",
      "type": "object",
      "properties": {
        "서울": "서울특별시",
        "부산": "부산광역시",
        "대구": "대구광역시",
        "인천": "인천광역시",
        "광주": "광주광역시",
        "대전": "대전광역시",
        "울산": "울산광역시",
        "세종": "세종특별자치시",
        "경기": "경기도",
        "강원": "강원특별자치도",
        "충북": "충청북도",
        "충남": "충청남도",
        "전북": "전북특별자치도",
        "전남": "전라남도",
        "경북": "경상북도",
        "경남": "경상남도",
        "제주": "제주특별자치도"
      }
    },

    "quarter_data_point": {
      "type": "object",
      "description": "분기별 데이터 포인트",
      "properties": {
        "period": {
          "type": "string",
          "description": "기간 (예: '23.2/4, '24.2/4)",
          "example": "'25.2/4"
        },
        "value": {
          "type": "number",
          "description": "해당 기간의 수치"
        }
      },
      "required": ["period", "value"]
    },

    "industry_detail": {
      "type": "object",
      "description": "산업/업종 상세 정보",
      "properties": {
        "name": {
          "type": "string",
          "description": "산업/업종명 (보도자료 표기)"
        },
        "growth_rate": {
          "type": "number",
          "description": "증감률 (%)"
        },
        "contribution": {
          "type": "number",
          "description": "기여도 (옵션)"
        }
      },
      "required": ["name", "growth_rate"]
    },

    "chart_series": {
      "type": "object",
      "description": "차트 시리즈 데이터",
      "properties": {
        "name": {
          "type": "string",
          "description": "시리즈 이름 (예: 전국, 서울)"
        },
        "data": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/quarter_data_point"
          }
        },
        "color": {
          "type": "string",
          "description": "라인 색상 (CSS color)"
        },
        "dashStyle": {
          "type": "string",
          "enum": ["solid", "dash", "dot"],
          "default": "solid"
        }
      },
      "required": ["name", "data"]
    },

    "chart_config": {
      "type": "object",
      "description": "차트 설정",
      "properties": {
        "title": {
          "type": "string",
          "description": "차트 제목"
        },
        "yAxisLabel": {
          "type": "string",
          "description": "Y축 라벨"
        },
        "yAxisMin": {
          "type": "number",
          "description": "Y축 최소값"
        },
        "yAxisMax": {
          "type": "number",
          "description": "Y축 최대값"
        },
        "yAxisStep": {
          "type": "number",
          "description": "Y축 간격"
        },
        "series": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/chart_series"
          }
        }
      },
      "required": ["title", "series"]
    }
  },

  "type": "object",
  "required": ["report_info", "production", "consumption_construction", "export_import_price", "employment_migration", "summary_table", "charts"],

  "properties": {
    "report_info": {
      "type": "object",
      "description": "보도자료 기본 정보",
      "required": ["year", "quarter", "region", "region_full_name", "region_code", "page_number"],
      "properties": {
        "year": {
          "type": "integer",
          "description": "보도자료 기준 연도",
          "example": 2025
        },
        "quarter": {
          "type": "integer",
          "description": "보도자료 기준 분기",
          "enum": [1, 2, 3, 4]
        },
        "region": {
          "type": "string",
          "description": "시도명 (약칭)",
          "example": "서울"
        },
        "region_full_name": {
          "type": "string",
          "description": "시도 전체 명칭",
          "example": "서울특별시"
        },
        "region_code": {
          "type": "integer",
          "description": "시도 코드",
          "example": 11
        },
        "region_index": {
          "type": "integer",
          "description": "보도자료 내 지역 순번 (1~17)",
          "minimum": 1,
          "maximum": 17
        },
        "page_number": {
          "type": "integer",
          "description": "페이지 번호"
        }
      }
    },

    "production": {
      "type": "object",
      "description": "생산 섹션 (광공업생산, 서비스업생산)",
      "required": ["manufacturing", "service"],
      "properties": {
        "manufacturing": {
          "type": "object",
          "description": "광공업생산",
          "properties": {
            "total_growth_rate": {
              "type": "number",
              "description": "전년동분기대비 증감률 (%)"
            },
            "direction": {
              "type": "string",
              "enum": ["증가", "감소"]
            },
            "increase_industries": {
              "type": "array",
              "description": "증가 기여 업종",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            },
            "decrease_industries": {
              "type": "array",
              "description": "감소 기여 업종",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            }
          }
        },
        "service": {
          "type": "object",
          "description": "서비스업생산",
          "properties": {
            "total_growth_rate": {
              "type": "number",
              "description": "전년동분기대비 증감률 (%)"
            },
            "direction": {
              "type": "string",
              "enum": ["증가", "감소"]
            },
            "increase_industries": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            },
            "decrease_industries": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            }
          }
        }
      }
    },

    "consumption_construction": {
      "type": "object",
      "description": "소비.건설 섹션",
      "required": ["retail", "construction"],
      "properties": {
        "retail": {
          "type": "object",
          "description": "소매판매",
          "properties": {
            "total_growth_rate": {
              "type": "number"
            },
            "direction": {
              "type": "string",
              "enum": ["증가", "감소"]
            },
            "increase_categories": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            },
            "decrease_categories": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            }
          }
        },
        "construction": {
          "type": "object",
          "description": "건설수주",
          "properties": {
            "total_growth_rate": {
              "type": "number"
            },
            "direction": {
              "type": "string",
              "enum": ["증가", "감소"]
            },
            "increase_categories": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            },
            "decrease_categories": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            }
          }
        }
      }
    },

    "export_import_price": {
      "type": "object",
      "description": "수출입.물가 섹션",
      "required": ["export", "import", "consumer_price"],
      "properties": {
        "export": {
          "type": "object",
          "description": "수출",
          "properties": {
            "total_growth_rate": {
              "type": "number"
            },
            "direction": {
              "type": "string",
              "enum": ["증가", "감소"]
            },
            "increase_items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            },
            "decrease_items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            }
          }
        },
        "import": {
          "type": "object",
          "description": "수입",
          "properties": {
            "total_growth_rate": {
              "type": "number"
            },
            "direction": {
              "type": "string",
              "enum": ["증가", "감소"]
            },
            "increase_items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            },
            "decrease_items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            }
          }
        },
        "consumer_price": {
          "type": "object",
          "description": "소비자물가",
          "properties": {
            "total_growth_rate": {
              "type": "number"
            },
            "direction": {
              "type": "string",
              "enum": ["상승", "하락"]
            },
            "increase_items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            },
            "decrease_items": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/industry_detail"
              }
            }
          }
        }
      }
    },

    "employment_migration": {
      "type": "object",
      "description": "고용.인구이동 섹션",
      "required": ["employment_rate", "population_migration"],
      "properties": {
        "employment_rate": {
          "type": "object",
          "description": "고용률",
          "properties": {
            "total_change": {
              "type": "number",
              "description": "전년동분기대비 증감 (%p)"
            },
            "direction": {
              "type": "string",
              "enum": ["상승", "하락"]
            },
            "increase_age_groups": {
              "type": "array",
              "description": "상승 연령대",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "연령대명 (예: 60대)"
                  },
                  "change": {
                    "type": "number",
                    "description": "증감 (%p)"
                  }
                }
              }
            },
            "decrease_age_groups": {
              "type": "array",
              "description": "하락 연령대",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "change": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "population_migration": {
          "type": "object",
          "description": "인구이동",
          "properties": {
            "net_migration": {
              "type": "integer",
              "description": "순이동 인구 (명)"
            },
            "direction": {
              "type": "string",
              "enum": ["순유입", "순유출"]
            },
            "inflow_age_groups": {
              "type": "array",
              "description": "유입 연령대",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "count": {
                    "type": "integer",
                    "description": "인원 (명)"
                  }
                }
              }
            },
            "outflow_age_groups": {
              "type": "array",
              "description": "유출 연령대",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "count": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        }
      }
    },

    "summary_table": {
      "type": "object",
      "description": "주요지표 요약 테이블",
      "properties": {
        "title": {
          "type": "string",
          "description": "테이블 제목",
          "example": "《 서울특별시 주요지표 》"
        },
        "columns": {
          "type": "array",
          "description": "열 정의",
          "items": {
            "type": "object",
            "properties": {
              "key": {
                "type": "string"
              },
              "label": {
                "type": "string"
              },
              "unit": {
                "type": "string"
              },
              "colspan": {
                "type": "integer",
                "default": 1
              }
            }
          }
        },
        "rows": {
          "type": "array",
          "description": "행 데이터 (분기별)",
          "items": {
            "type": "object",
            "properties": {
              "period": {
                "type": "string"
              },
              "manufacturing": {
                "type": "number"
              },
              "service": {
                "type": "number"
              },
              "retail": {
                "type": "number"
              },
              "construction": {
                "type": "number"
              },
              "export": {
                "type": "number"
              },
              "import": {
                "type": "number"
              },
              "consumer_price": {
                "type": "number"
              },
              "employment_rate": {
                "type": "number"
              },
              "migration_total": {
                "type": "number"
              },
              "migration_20_29": {
                "type": "number"
              }
            }
          }
        }
      }
    },

    "charts": {
      "type": "object",
      "description": "차트 데이터 (8개 차트)",
      "properties": {
        "manufacturing": {
          "$ref": "#/definitions/chart_config",
          "description": "광공업생산 전년동분기대비 증감률(%)"
        },
        "service": {
          "$ref": "#/definitions/chart_config",
          "description": "서비스업생산 전년동분기대비 증감률(%)"
        },
        "retail": {
          "$ref": "#/definitions/chart_config",
          "description": "소매판매 전년동분기대비 증감률(%)"
        },
        "construction": {
          "$ref": "#/definitions/chart_config",
          "description": "건설수주 전년동분기대비 증감률(%)"
        },
        "export_import": {
          "$ref": "#/definitions/chart_config",
          "description": "수출입 전년동분기대비 증감률(%)"
        },
        "consumer_price": {
          "$ref": "#/definitions/chart_config",
          "description": "소비자물가 전년동분기대비 등락률(%)"
        },
        "employment_rate": {
          "$ref": "#/definitions/chart_config",
          "description": "고용률 전년동분기대비 증감(%p)"
        },
        "population_migration": {
          "$ref": "#/definitions/chart_config",
          "description": "인구순이동(천명)"
        }
      }
    }
  },

  "excel_sheet_mapping": {
    "description": "엑셀 시트 및 컬럼 매핑",
    "sheets": {
      "시도별현황": {
        "description": "지역 코드에 따른 요약 데이터 (동적 시트)",
        "region_code_cell": "D1"
      },
      "A분석": {
        "description": "광공업생산 증감률 및 기여도",
        "region_col": 3,
        "industry_code_col": 6,
        "industry_name_col": 7,
        "quarter_cols": {
          "2023_2Q": 13,
          "2024_2Q": 17,
          "2025_1Q": 20,
          "2025_2Q": 21,
          "2025_3Q": 22
        },
        "contribution_col": 28
      },
      "B분석": {
        "description": "서비스업생산 증감률 및 기여도",
        "region_col": 3,
        "industry_code_col": 6,
        "industry_name_col": 7,
        "quarter_cols": {
          "2023_2Q": 12,
          "2024_2Q": 16,
          "2025_1Q": 19,
          "2025_2Q": 20,
          "2025_3Q": 21
        }
      },
      "C분석": {
        "description": "소매판매액지수 증감률",
        "region_col": 3,
        "category_code_col": 6,
        "category_name_col": 7,
        "quarter_cols": {
          "2023_2Q": 12,
          "2024_2Q": 16,
          "2025_1Q": 19,
          "2025_2Q": 20,
          "2025_3Q": 21
        }
      },
      "F'분석": {
        "description": "건설수주 증감률",
        "region_col": 2,
        "category_code_col": 4,
        "category_name_col": 6,
        "quarter_cols": {
          "2023_2Q": 11,
          "2024_2Q": 15,
          "2025_1Q": 18,
          "2025_2Q": 19,
          "2025_3Q": 20
        }
      },
      "G분석": {
        "description": "수출 증감률",
        "region_col": 3,
        "item_code_col": 7,
        "item_name_col": 8,
        "quarter_cols": {
          "2023_2Q": 14,
          "2024_2Q": 18,
          "2025_1Q": 21,
          "2025_2Q": 22,
          "2025_3Q": 23
        },
        "contribution_col": 26
      },
      "H분석": {
        "description": "수입 증감률",
        "region_col": 3,
        "item_code_col": 7,
        "item_name_col": 8,
        "quarter_cols": {
          "2023_2Q": 14,
          "2024_2Q": 18,
          "2025_1Q": 21,
          "2025_2Q": 22,
          "2025_3Q": 23
        },
        "contribution_col": 26
      },
      "E(지출목적물가)분석": {
        "description": "소비자물가 등락률",
        "region_col": 3,
        "category_code_col": 6,
        "category_name_col": 8,
        "quarter_cols": {
          "2023_2Q": 13,
          "2024_2Q": 17,
          "2025_1Q": 20,
          "2025_2Q": 21,
          "2025_3Q": 22
        }
      },
      "D(고용률)분석": {
        "description": "고용률 증감",
        "region_col": 2,
        "age_group_col": 5,
        "quarter_cols": {
          "2023_2Q": 10,
          "2024_2Q": 14,
          "2025_1Q": 17,
          "2025_2Q": 18,
          "2025_3Q": 19
        }
      },
      "I(순인구이동)집계": {
        "description": "인구순이동",
        "region_col": 4,
        "age_group_col": 7,
        "quarter_cols": {
          "2023_2Q": 17,
          "2024_2Q": 21,
          "2025_1Q": 24,
          "2025_2Q": 25,
          "2025_3Q": 26
        }
      }
    }
  },

  "text_generation_rules": {
    "production_section": {
      "manufacturing": {
        "increase_pattern": "(광공업 생산) {decrease_industries} 등에서 줄었으나, {increase_industries} 등에서 늘어 전년동분기대비 {rate}% 증가",
        "decrease_pattern": "(광공업 생산) {increase_industries} 등에서 늘었으나, {decrease_industries} 등에서 줄어 전년동분기대비 {rate}% 감소"
      },
      "service": {
        "increase_pattern": "(서비스업 생산) {decrease_industries} 등이 줄었으나, {increase_industries} 등이 늘어 전년동분기대비 {rate}% 증가",
        "decrease_pattern": "(서비스업 생산) {increase_industries} 등이 늘었으나, {decrease_industries} 등이 줄어 전년동분기대비 {rate}% 감소"
      }
    },
    "consumption_construction_section": {
      "retail": {
        "increase_pattern": "(소매판매) {decrease_items}등이 줄었으나, {increase_items}이 늘어 전년동분기대비 {rate}% 증가",
        "decrease_pattern": "(소매판매) {increase_items}이 늘었으나, {decrease_items}등이 줄어 전년동분기대비 {rate}% 감소"
      },
      "construction": {
        "increase_pattern": "(건설수주) {decrease_items}이 줄었으나, {increase_items}이 늘어 전년동분기대비 {rate}% 증가",
        "decrease_pattern": "(건설수주) {increase_items}이 늘었으나, {decrease_items}이 줄어 전년동분기대비 {rate}% 감소"
      }
    },
    "export_import_price_section": {
      "export": {
        "increase_pattern": "(수출) {decrease_items} 등이 줄었으나, {increase_items} 등이 늘어 전년동분기대비 {rate}% 증가",
        "decrease_pattern": "(수출) {increase_items} 등이 늘었으나, {decrease_items} 등이 줄어 전년동분기대비 {rate}% 감소"
      },
      "import": {
        "increase_pattern": "(수입) {decrease_items} 등이 줄었으나, {increase_items} 등이 늘어 전년동분기대비 {rate}% 증가",
        "decrease_pattern": "(수입) {increase_items} 등이 늘었으나, {decrease_items} 등이 줄어 전년동분기대비 {rate}% 감소"
      },
      "consumer_price": {
        "increase_pattern": "(소비자물가) {decrease_items}가 하락하였으나, {increase_items} 등이 올라 전년동분기대비 {rate}% 상승",
        "decrease_pattern": "(소비자물가) {increase_items} 등이 상승하였으나, {decrease_items}가 내려 전년동분기대비 {rate}% 하락"
      }
    },
    "employment_migration_section": {
      "employment_rate": {
        "increase_pattern": "(고용률) {decrease_groups} 등에서 하락하였으나, {increase_groups}에서 올라 전년동분기대비 {rate}%p 상승",
        "decrease_pattern": "(고용률) {increase_groups}에서 상승하였으나, {decrease_groups} 등에서 내려 전년동분기대비 {rate}%p 하락"
      },
      "population_migration": {
        "inflow_pattern": "(인구이동) 인구는 {outflow_groups} 등에서 유출되었으나, {inflow_groups} 등에서 유입되어 {count}명 순유입",
        "outflow_pattern": "(인구이동) 인구는 {inflow_groups} 등에서 유입되었으나, {outflow_groups} 등에서 유출되어 {count}명 순유출"
      }
    }
  }
}

