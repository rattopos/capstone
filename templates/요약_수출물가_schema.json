{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "요약-수출물가 스키마",
  "description": "지역경제동향 요약 - 수출/물가 부문 생성을 위한 데이터 스키마",
  
  "type": "object",
  "required": ["report_info", "exports", "price", "page_number"],
  
  "properties": {
    "report_info": {
      "type": "object",
      "description": "보고서 기본 정보",
      "required": ["year", "quarter"],
      "properties": {
        "year": {
          "type": "integer",
          "description": "보고서 기준 연도",
          "example": 2025
        },
        "quarter": {
          "type": "integer",
          "description": "보고서 기준 분기",
          "enum": [1, 2, 3, 4],
          "example": 2
        }
      }
    },
    
    "exports": {
      "type": "object",
      "description": "수출 데이터",
      "required": ["nationwide", "increase_regions", "decrease_regions", "increase_count", "decrease_count", "chart_data"],
      "properties": {
        "nationwide": {
          "type": "object",
          "description": "전국 데이터",
          "required": ["amount", "change"],
          "properties": {
            "amount": {
              "type": "string",
              "description": "수출액 (억달러)",
              "example": "1,751.6"
            },
            "change": {
              "type": "number",
              "description": "전년동분기대비 증감률 (%)",
              "example": 2.1
            }
          }
        },
        "increase_regions": {
          "type": "array",
          "description": "증가 지역 (증가율 높은 순)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "decrease_regions": {
          "type": "array",
          "description": "감소 지역 (감소율 높은 순, 절대값 기준)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "increase_count": {
          "type": "integer",
          "description": "증가 지역 수",
          "example": 10
        },
        "decrease_count": {
          "type": "integer",
          "description": "감소 지역 수",
          "example": 7
        },
        "chart_data": {
          "type": "array",
          "description": "차트용 시도별 데이터 (순서대로)",
          "items": {
            "$ref": "#/definitions/export_chart_data"
          }
        }
      }
    },
    
    "price": {
      "type": "object",
      "description": "소비자물가 데이터",
      "required": ["nationwide", "above_regions", "below_regions", "above_count", "below_count", "chart_data"],
      "properties": {
        "nationwide": {
          "type": "object",
          "description": "전국 데이터",
          "required": ["index", "change"],
          "properties": {
            "index": {
              "type": "number",
              "description": "소비자물가지수 (2020=100)",
              "example": 116.3
            },
            "change": {
              "type": "number",
              "description": "전년동분기대비 등락률 (%)",
              "example": 2.1
            }
          }
        },
        "above_regions": {
          "type": "array",
          "description": "전국보다 높은 지역 (상승률 높은 순)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "below_regions": {
          "type": "array",
          "description": "전국보다 낮은 지역 (상승률 낮은 순)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "above_count": {
          "type": "integer",
          "description": "전국보다 높은 지역 수",
          "example": 7
        },
        "below_count": {
          "type": "integer",
          "description": "전국보다 낮은 지역 수",
          "example": 10
        },
        "chart_data": {
          "type": "array",
          "description": "차트용 시도별 데이터 (순서대로)",
          "items": {
            "$ref": "#/definitions/price_chart_data"
          }
        }
      }
    },
    
    "page_number": {
      "type": "integer",
      "description": "페이지 번호",
      "example": 4
    }
  },
  
  "definitions": {
    "region_data": {
      "type": "object",
      "required": ["name", "value"],
      "properties": {
        "name": {
          "type": "string",
          "description": "지역명",
          "example": "제주"
        },
        "value": {
          "type": "number",
          "description": "증감률 또는 등락률 (%)",
          "example": 37.8
        }
      }
    },
    "export_chart_data": {
      "type": "object",
      "required": ["name", "amount", "change"],
      "properties": {
        "name": {
          "type": "string",
          "description": "지역명 (약어)",
          "example": "전국"
        },
        "amount": {
          "type": "string",
          "description": "수출액 (억달러)",
          "example": "1,751.6"
        },
        "amount_normalized": {
          "type": "number",
          "description": "차트 높이 정규화 값 (0-100)",
          "example": 100
        },
        "change": {
          "type": "number",
          "description": "전년동분기대비 증감률 (%)",
          "example": 2.1
        },
        "group": {
          "type": "string",
          "description": "지역 그룹명 (선택, 첫 번째 지역에만 표시)",
          "example": "경인"
        }
      }
    },
    "price_chart_data": {
      "type": "object",
      "required": ["name", "index", "change"],
      "properties": {
        "name": {
          "type": "string",
          "description": "지역명 (약어)",
          "example": "전국"
        },
        "index": {
          "type": "number",
          "description": "소비자물가지수",
          "example": 116.3
        },
        "change": {
          "type": "number",
          "description": "전년동분기대비 등락률 (%)",
          "example": 2.1
        },
        "group": {
          "type": "string",
          "description": "지역 그룹명 (선택, 첫 번째 지역에만 표시)",
          "example": "경인"
        }
      }
    }
  },
  
  "data_sources": {
    "description": "데이터 소스 매핑",
    "exports": {
      "source": "수출_data.json",
      "fields": {
        "nationwide.amount": "nationwide_data.amount",
        "nationwide.change": "nationwide_data.change",
        "increase_regions": "regional_data.increase_regions",
        "decrease_regions": "regional_data.decrease_regions"
      }
    },
    "price": {
      "source": "물가동향_data.json",
      "fields": {
        "nationwide.index": "nationwide_data.index",
        "nationwide.change": "nationwide_data.change",
        "above_regions": "regional_data.above_regions",
        "below_regions": "regional_data.below_regions"
      }
    }
  },
  
  "example": {
    "report_info": {
      "year": 2025,
      "quarter": 2
    },
    "exports": {
      "nationwide": {
        "amount": "1,751.6",
        "change": 2.1
      },
      "increase_regions": [
        {"name": "제주", "value": 37.8},
        {"name": "충북", "value": 34.9},
        {"name": "경남", "value": 12.9}
      ],
      "decrease_regions": [
        {"name": "세종", "value": -37.2},
        {"name": "전남", "value": -13.7},
        {"name": "부산", "value": -6.0}
      ],
      "increase_count": 10,
      "decrease_count": 7,
      "chart_data": [
        {"name": "전국", "amount": "1,751.6", "amount_normalized": 100, "change": 2.1},
        {"name": "서울", "amount": "179.1", "amount_normalized": 10, "change": 1.6, "group": "경인"},
        {"name": "인천", "amount": "155.6", "amount_normalized": 9, "change": 6.2}
      ]
    },
    "price": {
      "nationwide": {
        "index": 116.3,
        "change": 2.1
      },
      "above_regions": [
        {"name": "부산", "value": 2.2}
      ],
      "below_regions": [
        {"name": "제주", "value": 1.5},
        {"name": "광주", "value": 1.7},
        {"name": "울산", "value": 1.9}
      ],
      "above_count": 7,
      "below_count": 10,
      "chart_data": [
        {"name": "전국", "index": 116.3, "change": 2.1},
        {"name": "서울", "index": 115.6, "change": 2.0, "group": "경인"},
        {"name": "인천", "index": 116.9, "change": 2.0}
      ]
    },
    "page_number": 4
  }
}

