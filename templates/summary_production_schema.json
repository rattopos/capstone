{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "요약-생산 스키마",
  "description": "지역경제동향 요약 - 생산 부문 (광공업생산, 서비스업생산) 생성을 위한 데이터 스키마",
  
  "type": "object",
  "required": ["report_info", "mining_production", "service_production", "page_number"],
  
  "properties": {
    "report_info": {
      "type": "object",
      "description": "보도자료 기본 정보",
      "required": ["year", "quarter"],
      "properties": {
        "year": {
          "type": "integer",
          "description": "보도자료 기준 연도",
          "example": 2025
        },
        "quarter": {
          "type": "integer",
          "description": "보도자료 기준 분기",
          "enum": [1, 2, 3, 4],
          "example": 2
        }
      }
    },
    
    "mining_production": {
      "type": "object",
      "description": "광공업생산 데이터",
      "required": ["nationwide", "increase_regions", "decrease_regions", "increase_count", "decrease_count", "chart_data"],
      "properties": {
        "nationwide": {
          "type": "object",
          "description": "전국 데이터",
          "required": ["index", "change"],
          "properties": {
            "index": {
              "type": "number",
              "description": "광공업생산지수 (2020=100)",
              "example": 114.4
            },
            "change": {
              "type": "number",
              "description": "전년동분기대비 증감률 (%)",
              "example": 2.1
            }
          }
        },
        "increase_regions": {
          "type": "array",
          "description": "증가 지역 (증가율 높은 순)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "decrease_regions": {
          "type": "array",
          "description": "감소 지역 (감소율 높은 순, 절대값 기준)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "increase_count": {
          "type": "integer",
          "description": "증가 지역 수",
          "example": 6
        },
        "decrease_count": {
          "type": "integer",
          "description": "감소 지역 수",
          "example": 11
        },
        "chart_data": {
          "type": "array",
          "description": "차트용 시도별 데이터 (순서대로)",
          "items": {
            "$ref": "#/definitions/chart_region_data"
          }
        }
      }
    },
    
    "service_production": {
      "type": "object",
      "description": "서비스업생산 데이터",
      "required": ["nationwide", "increase_regions", "decrease_regions", "increase_count", "decrease_count", "chart_data"],
      "properties": {
        "nationwide": {
          "type": "object",
          "description": "전국 데이터",
          "required": ["index", "change"],
          "properties": {
            "index": {
              "type": "number",
              "description": "서비스업생산지수 (2020=100)",
              "example": 119.2
            },
            "change": {
              "type": "number",
              "description": "전년동분기대비 증감률 (%)",
              "example": 1.4
            }
          }
        },
        "increase_regions": {
          "type": "array",
          "description": "증가 지역 (증가율 높은 순)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "decrease_regions": {
          "type": "array",
          "description": "감소 지역 (감소율 높은 순, 절대값 기준)",
          "items": {
            "$ref": "#/definitions/region_data"
          }
        },
        "increase_count": {
          "type": "integer",
          "description": "증가 지역 수",
          "example": 8
        },
        "decrease_count": {
          "type": "integer",
          "description": "감소 지역 수",
          "example": 8
        },
        "chart_data": {
          "type": "array",
          "description": "차트용 시도별 데이터 (순서대로)",
          "items": {
            "$ref": "#/definitions/chart_region_data"
          }
        }
      }
    },
    
    "page_number": {
      "type": "integer",
      "description": "페이지 번호",
      "example": 2
    }
  },
  
  "definitions": {
    "region_data": {
      "type": "object",
      "required": ["name", "value"],
      "properties": {
        "name": {
          "type": "string",
          "description": "지역명",
          "example": "서울"
        },
        "value": {
          "type": "number",
          "description": "증감률 (%)",
          "example": -10.1
        }
      }
    },
    "chart_region_data": {
      "type": "object",
      "required": ["name", "index", "change"],
      "properties": {
        "name": {
          "type": "string",
          "description": "지역명 (약어)",
          "example": "전국"
        },
        "index": {
          "type": "number",
          "description": "생산지수",
          "example": 114.4
        },
        "change": {
          "type": "number",
          "description": "전년동분기대비 증감률 (%)",
          "example": 2.1
        },
        "group": {
          "type": "string",
          "description": "지역 그룹명 (선택, 첫 번째 지역에만 표시)",
          "example": "경인"
        }
      }
    }
  },
  
  "data_sources": {
    "description": "데이터 소스 매핑",
    "mining_production": {
      "source": "mining_manufacturing_data.json",
      "fields": {
        "nationwide.index": "nationwide_data.production_index",
        "nationwide.change": "nationwide_data.growth_rate",
        "increase_regions": "regional_data.increase_regions",
        "decrease_regions": "regional_data.decrease_regions"
      }
    },
    "service_production": {
      "source": "service_industry_data.json",
      "fields": {
        "nationwide.index": "nationwide_data.production_index",
        "nationwide.change": "nationwide_data.growth_rate",
        "increase_regions": "regional_data.increase_regions",
        "decrease_regions": "regional_data.decrease_regions"
      }
    }
  },
  
  "mining_classification_name_mapping": {
    "description": "광공업 분류명 축약 매핑",
    "mapping": {
      "석탄, 원유 및 천연가스 광업": "석탄, 원유 및 천연가스 광업",
      "금속 광업": "금속",
      "비금속광물 광업; 연료용 제외": "비금속광물 광업; 연료용 제외",
      "식료품 제조업": "식료품",
      "음료 제조업": "음료",
      "담배 제조업": "담배",
      "섬유제품 제조업; 의복 제외": "섬유제품",
      "의복, 의복액세서리 및 모피제품 제조업": "의복·모피",
      "가죽, 가방 및 신발 제조업": "가죽, 가방 및 신발 제조업",
      "목재 및 나무제품 제조업; 가구 제외": "목재·나무제품",
      "펄프, 종이 및 종이제품 제조업": "펄프, 종이 및 종이제품 제조업",
      "인쇄 및 기록매체 복제업": "인쇄 및 기록매체 복제업",
      "코크스, 연탄 및 석유정제품 제조업": "코크스·연탄·석유정제품 제조업",
      "화학 물질 및 화학제품 제조업; 의약품 제외": "화학제품",
      "의료용 물질 및 의약품 제조업": "의약품",
      "고무 및 플라스틱제품 제조업": "고무·플라스틱",
      "비금속 광물제품 제조업": "비금속 광물제품 제조업",
      "1차 금속 제조업": "금속",
      "금속 가공제품 제조업; 기계 및 가구 제외": "금속가공제품",
      "전자 부품, 컴퓨터, 영상, 음향 및 통신장비 제조업": "반도체·전자부품",
      "의료, 정밀, 광학 기기 및 시계 제조업": "의료·정밀",
      "전기장비 제조업": "전기장비",
      "기타 기계 및 장비 제조업": "기타기계장비",
      "자동차 및 트레일러 제조업": "자동차·트레일러",
      "기타 운송장비 제조업": "기타 운송장비",
      "가구 제조업": "가구",
      "기타 제품 제조업": "기타 제품 제조업",
      "산업용 기계 및 장비 수리업": "기계·장비 수리업",
      "전기, 가스, 증기 및 공기 조절 공급업": "전기·가스업"
    }
  },
  
  "chart_region_order": {
    "description": "차트 지역 순서 (지역 그룹별)",
    "order": [
      {"name": "전국", "group": null},
      {"name": "서울", "group": "경인"},
      {"name": "인천", "group": null},
      {"name": "경기", "group": null},
      {"name": "대전", "group": "충청"},
      {"name": "세종", "group": null},
      {"name": "충북", "group": null},
      {"name": "충남", "group": null},
      {"name": "광주", "group": "호남"},
      {"name": "전북", "group": null},
      {"name": "전남", "group": null},
      {"name": "제주", "group": null},
      {"name": "대구", "group": "동북"},
      {"name": "경북", "group": null},
      {"name": "강원", "group": null},
      {"name": "부산", "group": "동남"},
      {"name": "울산", "group": null},
      {"name": "경남", "group": null}
    ]
  },
  
  "example": {
    "report_info": {
      "year": 2025,
      "quarter": 2
    },
    "mining_production": {
      "nationwide": {
        "index": 114.4,
        "change": 2.1
      },
      "increase_regions": [
        {"name": "충북", "value": 14.1},
        {"name": "경기", "value": 12.3},
        {"name": "광주", "value": 11.3}
      ],
      "decrease_regions": [
        {"name": "서울", "value": -10.1},
        {"name": "충남", "value": -6.4},
        {"name": "부산", "value": -4.0}
      ],
      "increase_count": 6,
      "decrease_count": 11,
      "chart_data": [
        {"name": "전국", "index": 114.4, "change": 2.1},
        {"name": "서울", "index": 84.0, "change": -10.1, "group": "경인"},
        {"name": "인천", "index": 141.6, "change": -3.7},
        {"name": "경기", "index": 145.6, "change": 12.3}
      ]
    },
    "service_production": {
      "nationwide": {
        "index": 119.2,
        "change": 1.4
      },
      "increase_regions": [
        {"name": "경기", "value": 5.4},
        {"name": "인천", "value": 3.5},
        {"name": "세종", "value": 3.3}
      ],
      "decrease_regions": [
        {"name": "제주", "value": -9.2},
        {"name": "경남", "value": -2.8},
        {"name": "강원", "value": -1.6}
      ],
      "increase_count": 8,
      "decrease_count": 8,
      "chart_data": [
        {"name": "전국", "index": 119.2, "change": 1.4},
        {"name": "서울", "index": 126.3, "change": 2.3, "group": "경인"},
        {"name": "인천", "index": 131.1, "change": 3.5},
        {"name": "경기", "index": 123.3, "change": 5.4}
      ]
    },
    "page_number": 2
  }
}

