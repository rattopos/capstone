{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "통계표 스키마",
  "description": "지역경제동향 통계표 생성을 위한 데이터 스키마. 분석표의 순서나 문구가 바뀌어도 매핑을 통해 대응 가능.",
  
  "excel_sheet_mapping": {
    "description": "분석표 엑셀의 시트명과 통계표 항목 매핑",
    "tables": {
      "광공업생산지수": {
        "집계_시트": "A(광공업생산)집계",
        "분석_시트": "A 분석",
        "참고_시트": "A 참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": 2020
      },
      "서비스업생산지수": {
        "집계_시트": "B(서비스업생산)집계",
        "분석_시트": "B 분석",
        "참고_시트": "B 참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": 2020
      },
      "소매판매액지수": {
        "집계_시트": "C(소비)집계",
        "분석_시트": "C 분석",
        "참고_시트": "C 참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": 2020
      },
      "건설수주액": {
        "집계_시트": "F'(건설)집계",
        "분석_시트": "F'분석",
        "참고_시트": "F'참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": null
      },
      "고용률": {
        "집계_시트": "D(고용률)집계",
        "분석_시트": "D(고용률)분석",
        "참고_시트": null,
        "단위": "[전년동기비, %p]",
        "지수_기준년": null
      },
      "실업률": {
        "집계_시트": "D(실업)집계",
        "분석_시트": "D(실업)분석",
        "참고_시트": null,
        "단위": "[전년동기비, %p]",
        "지수_기준년": null
      },
      "국내인구이동": {
        "집계_시트": "I(순인구이동)집계",
        "분석_시트": null,
        "참고_시트": "I 참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": null
      },
      "수출액": {
        "집계_시트": "G(수출)집계",
        "분석_시트": "G 분석",
        "참고_시트": "G 참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": null
      },
      "수입액": {
        "집계_시트": "H(수입)집계",
        "분석_시트": "H 분석",
        "참고_시트": "H 참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": null
      },
      "소비자물가지수": {
        "집계_시트": "E(지출목적물가)집계",
        "분석_시트": "E(지출목적물가) 분석",
        "참고_시트": "E(지출목적물가) 참고",
        "단위": "[전년동기비, %]",
        "지수_기준년": 2020
      }
    }
  },
  
  "region_mapping": {
    "description": "지역 코드와 표시명 매핑",
    "regions": {
      "00": {"name": "전국", "display": "전국", "group": null, "page": 1},
      "11": {"name": "서울", "display": "서울", "group": "경인", "page": 1},
      "26": {"name": "부산", "display": "부산", "group": "동남", "page": 1},
      "27": {"name": "대구", "display": "대구", "group": "동북", "page": 1},
      "28": {"name": "인천", "display": "인천", "group": "경인", "page": 1},
      "29": {"name": "광주", "display": "광주", "group": "호남", "page": 1},
      "30": {"name": "대전", "display": "대전", "group": "충청", "page": 1},
      "31": {"name": "울산", "display": "울산", "group": "동남", "page": 1},
      "36": {"name": "세종", "display": "세종", "group": "충청", "page": 1},
      "41": {"name": "경기", "display": "경기", "group": "경인", "page": 2},
      "42": {"name": "강원", "display": "강원", "group": "동북", "page": 2},
      "43": {"name": "충북", "display": "충북", "group": "충청", "page": 2},
      "44": {"name": "충남", "display": "충남", "group": "충청", "page": 2},
      "45": {"name": "전북", "display": "전북", "group": "호남", "page": 2},
      "46": {"name": "전남", "display": "전남", "group": "호남", "page": 2},
      "47": {"name": "경북", "display": "경북", "group": "동북", "page": 2},
      "48": {"name": "경남", "display": "경남", "group": "동남", "page": 2},
      "50": {"name": "제주", "display": "제주", "group": "호남", "page": 2}
    },
    "page1_order": ["전국", "서울", "부산", "대구", "인천", "광주", "대전", "울산", "세종"],
    "page2_order": ["경기", "강원", "충북", "충남", "전북", "전남", "경북", "경남", "제주"]
  },

  "column_mapping": {
    "description": "분석 시트의 컬럼 인덱스 매핑 (0-based)",
    "common_columns": {
      "참고용": 0,
      "조회용": 1,
      "지역코드": 2,
      "지역이름": 3,
      "분류단계": 4,
      "중분류순위": 5,
      "산업코드": 6,
      "산업이름": 7,
      "가중치": 8
    },
    "growth_rate_columns": {
      "description": "전년동기비 증감률 컬럼",
      "연도별": {
        "2021": 9,
        "2022": 10,
        "2023": 11,
        "2024": 12
      },
      "분기별": {
        "2023_2Q": 13,
        "2023_3Q": 14,
        "2023_4Q": 15,
        "2024_1Q": 16,
        "2024_2Q": 17,
        "2024_3Q": 18,
        "2024_4Q": 19,
        "2025_1Q": 20,
        "2025_2Q": 21
      }
    }
  },
  
  "aggregation_column_mapping": {
    "description": "집계 시트의 컬럼 인덱스 매핑 (0-based)",
    "common_columns": {
      "조회용": 0,
      "조회준비2": 1,
      "조회준비1": 2,
      "지역코드": 3,
      "지역이름": 4,
      "분류단계": 5,
      "가중치": 6,
      "산업코드": 7,
      "산업이름": 8
    },
    "index_columns": {
      "description": "원지수 값 컬럼",
      "연도별": {
        "2020": 9,
        "2021": 10,
        "2022": 11,
        "2023": 12,
        "2024": 13
      },
      "분기별": {
        "2022_2Q": 14,
        "2022_3Q": 15,
        "2022_4Q": 16,
        "2023_1Q": 17,
        "2023_2Q": 18,
        "2023_3Q": 19,
        "2023_4Q": 20,
        "2024_1Q": 21,
        "2024_2Q": 22,
        "2024_3Q": 23,
        "2024_4Q": 24,
        "2025_1Q": 25,
        "2025_2Q": 26
      }
    }
  },

  "historical_data_mapping": {
    "description": "분석표에 없는 과거 데이터(2017-2020) 처리 방법",
    "method": "separate_json",
    "note": "2017-2020 데이터는 별도 JSON 파일로 관리하거나, 처음 생성 시 수동으로 입력. 이후 분석표 구조 변경에도 영향 없음.",
    "historical_data_path": "통계표_historical_data.json"
  },

  "table_structure": {
    "description": "통계표 출력 구조",
    "header": {
      "title_pattern": "{번호}. {통계표명}",
      "unit_label": "[전년동기비, %]"
    },
    "columns": {
      "description": "테이블 컬럼 (지역별)",
      "page1": ["전국", "서울", "부산", "대구", "인천", "광주", "대전", "울산", "세종"],
      "page2": ["경기", "강원", "충북", "충남", "전북", "전남", "경북", "경남", "제주"]
    },
    "rows": {
      "description": "테이블 행 (연도/분기별)",
      "yearly_rows": ["2017", "2018", "2019", "2020", "2021", "2022", "2023", "2024"],
      "quarterly_pattern": {
        "format": "{year}.{quarter}",
        "quarters": ["1/4", "2/4", "3/4", "4/4"]
      }
    }
  },
  
  "grdp_mapping": {
    "description": "분기 실질 지역내총생산(GRDP) 데이터 매핑",
    "title": "<참고> 분기 지역내총생산(GRDP)",
    "단위": "[전년동기비, %]",
    "note": "GRDP는 분석표 내 별도 시트 또는 외부 데이터로 관리",
    "data_source": "국가데이터처 지역계정"
  },

  "appendix_mapping": {
    "description": "부록 - 주요 용어 정의",
    "terms": [
      {
        "term": "불변지수",
        "definition": "불변지수는 가격 변동분이 제외된 수량 변동분만 포함되어 있음을 의미하며, 성장 수준 분석(전년동분기비)에 활용됨"
      },
      {
        "term": "광공업생산지수",
        "definition": "한국표준산업분류 상의 3개 대분류(B, C, D)를 대상으로 광업제조업동향조사의 월별 품목별 생산·출하(내수 및 수출)·재고 및 생산능력·가동률지수를 기초로 작성됨"
      },
      {
        "term": "서비스업생산지수",
        "definition": "한국표준산업분류 상의 13개 대분류(E, G, H, I, J, K, L, M, N, P, Q, R, S)를 대상으로 서비스업동향조사의 월별 매출액을 기초로 작성됨"
      },
      {
        "term": "소매판매액지수",
        "definition": "한국표준산업분류 상의 '자동차 판매업 중 승용차'와 '소매업'을 대상으로 서비스업동향조사의 월별 상품판매액을 기초로 작성됨"
      },
      {
        "term": "건설수주",
        "definition": "종합건설업 등록업체 중 전전년 「건설업조사」 결과를 기준으로 기성액 순위 상위 기업체(대표도: 54%)의 국내공사에 대한 건설수주액임"
      },
      {
        "term": "소비자물가지수",
        "definition": "가구에서 일상생활을 영위하기 위해 구입하는 상품과 서비스의 평균적인 가격변동을 측정한 지수임"
      },
      {
        "term": "지역내총생산",
        "definition": "일정 기간 동안에 일정 지역 내에서 새로이 창출된 최종생산물을 시장가격으로 평가한 가치의 합임"
      }
    ],
    "region_classification": {
      "title": "지역분류",
      "groups": {
        "경인": ["서울", "인천", "경기"],
        "충청": ["대전", "세종", "충북", "충남"],
        "호남": ["광주", "전북", "전남", "제주"],
        "동북": ["대구", "경북", "강원"],
        "동남": ["부산", "울산", "경남"]
      }
    },
    "industry_classification": {
      "title": "한국표준산업분류(11차)",
      "categories": {
        "광업제조업동향조사": [
          {"code": "B", "name": "광업"},
          {"code": "C", "name": "제조업"},
          {"code": "D", "name": "전기, 가스, 증기 및 공기조절 공급업"}
        ],
        "서비스업동향조사": [
          {"code": "E", "name": "수도, 하수 및 폐기물 처리, 원료 재생업"},
          {"code": "G", "name": "도매 및 소매업"},
          {"code": "H", "name": "운수 및 창고업"},
          {"code": "I", "name": "숙박 및 음식점업"},
          {"code": "J", "name": "정보통신업"},
          {"code": "K", "name": "금융 및 보험업"},
          {"code": "L", "name": "부동산업"},
          {"code": "M", "name": "전문, 과학 및 기술 서비스업"},
          {"code": "N", "name": "사업시설 관리, 사업 지원 및 임대 서비스업"},
          {"code": "P", "name": "교육 서비스업"},
          {"code": "Q", "name": "보건업 및 사회복지 서비스업"},
          {"code": "R", "name": "예술, 스포츠 및 여가관련 서비스업"},
          {"code": "S", "name": "협회 및 단체, 수리 및 기타 개인 서비스업"}
        ]
      }
    }
  },

  "output_config": {
    "description": "출력 설정",
    "number_format": {
      "growth_rate": {
        "decimals": 1,
        "positive_prefix": "",
        "negative_prefix": "-"
      }
    },
    "page_numbers": {
      "통계표_목차": 21,
      "광공업생산지수_1": 22,
      "광공업생산지수_2": 23,
      "서비스업생산지수_1": 24,
      "서비스업생산지수_2": 25,
      "GRDP_1": 24,
      "GRDP_2": 25,
      "부록_1": 26,
      "부록_2": 27
    }
  },

  "type": "object",
  "required": ["report_info", "tables"],
  
  "properties": {
    "report_info": {
      "type": "object",
      "description": "보도자료 기본 정보",
      "required": ["year", "quarter"],
      "properties": {
        "year": {
          "type": "integer",
          "description": "보도자료 기준 연도",
          "example": 2025
        },
        "quarter": {
          "type": "integer",
          "description": "보도자료 기준 분기",
          "enum": [1, 2, 3, 4]
        }
      }
    },
    
    "tables": {
      "type": "array",
      "description": "통계표 목록",
      "items": {
        "type": "object",
        "required": ["id", "title", "unit", "data"],
        "properties": {
          "id": {
            "type": "integer",
            "description": "통계표 번호"
          },
          "title": {
            "type": "string",
            "description": "통계표 제목"
          },
          "unit": {
            "type": "string",
            "description": "단위 표기"
          },
          "pages": {
            "type": "integer",
            "description": "페이지 수 (1 또는 2)"
          },
          "data": {
            "type": "object",
            "description": "통계표 데이터",
            "properties": {
              "yearly": {
                "type": "object",
                "description": "연도별 데이터",
                "additionalProperties": {
                  "type": "object",
                  "description": "지역별 값"
                }
              },
              "quarterly": {
                "type": "object",
                "description": "분기별 데이터",
                "additionalProperties": {
                  "type": "object",
                  "description": "지역별 값"
                }
              }
            }
          }
        }
      }
    },
    
    "grdp": {
      "type": "object",
      "description": "GRDP 참고 테이블",
      "properties": {
        "title": {"type": "string"},
        "unit": {"type": "string"},
        "data": {"type": "object"}
      }
    },
    
    "appendix": {
      "type": "object",
      "description": "부록 데이터",
      "properties": {
        "terms": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "term": {"type": "string"},
              "definition": {"type": "string"}
            }
          }
        }
      }
    }
  }
}

