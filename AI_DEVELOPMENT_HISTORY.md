# 🤖 AI 페어 프로그래밍 개발 히스토리
## 지역경제동향 보고서 자동 생성 시스템

> 이 문서는 Claude AI와의 프롬프트 기반 페어 프로그래밍을 통해 프로젝트를 개발한 과정을 기록합니다.

---

## 📋 목차
1. [프로젝트 시작 (Phase 1)](#phase-1-프로젝트-시작)
2. [알파 버전 개발 (Phase 2)](#phase-2-알파-버전-개발)
3. [웹 애플리케이션 구현 (Phase 3)](#phase-3-웹-애플리케이션-구현)
4. [고도화 및 기능 확장 (Phase 4)](#phase-4-고도화-및-기능-확장)
5. [품질 개선 및 안정화 (Phase 5)](#phase-5-품질-개선-및-안정화)
6. [대시보드 완성 (Phase 6)](#phase-6-대시보드-완성)
7. [코드 정리 및 국제화 (Phase 7)](#phase-7-코드-정리-및-국제화)
8. [기능 고도화 및 UX 개선 (Phase 8)](#phase-8-기능-고도화-및-ux-개선)

---

## Phase 1: 프로젝트 시작
### 📅 2025년 12월 11일 ~ 12일

### 🎯 목표
프로젝트 기본 구조 설계 및 요구사항 분석

### 💬 사용한 프롬프트들

#### 프롬프트 1: 프로젝트 초기 설정
```
국가데이터처에서 발간하는 "지역경제동향" 분기별 보고서를 자동으로 생성하는 
시스템을 만들고 싶어. 현재는 수작업으로 엑셀 데이터를 보고서에 옮기는데 
약 1주일이 걸린다고 해. Python Flask 기반으로 만들어줘.

입력: 분석표 엑셀 파일 (.xlsx)
출력: HTML 형태의 보고서

먼저 프로젝트 구조를 설계해줘.
```

#### 프롬프트 2: 데이터 스키마 설계
```
분석표 엑셀 파일의 구조를 분석해서 JSON 스키마로 정의해줘.
각 시트별로 어떤 데이터가 있고, 어느 셀에서 어떤 값을 읽어야 하는지
명세서를 만들어줘.

예시 시트들:
- A 분석 (광공업생산)
- B 분석 (서비스업생산)  
- C 분석 (소비동향)
- D(고용률)분석
...
```

### ✅ 결과물
- 프로젝트 기본 디렉토리 구조
- JSON 스키마 설계 체계 수립
- requirements.txt 작성

---

## Phase 2: 알파 버전 개발
### 📅 2025년 12월 15일

### 🎯 목표
핵심 기능 프로토타입 구현 및 데이터 추출 검증

### 💬 사용한 프롬프트들

#### 프롬프트 3: 엑셀 파싱 엔진 구현
```
pandas와 openpyxl을 사용해서 분석표 엑셀 파일을 읽고 데이터를 추출하는 
모듈을 만들어줘. 

요구사항:
1. 시트별로 데이터 추출
2. 결측치(빈 셀, NaN) 처리
3. 숫자 포맷팅 (소수점 1자리)
4. 증감률 계산 및 방향(증가/감소) 판단
```

#### 프롬프트 4: 정답 검증 시스템
```
correct_answer 폴더에 있는 정답 이미지(실제 보고서 캡처)와 
생성된 보고서의 수치가 완전히 일치하는지 검증하는 시스템을 만들어줘.

특히 다음 항목들이 정확해야 해:
- 전년동기비 증감률
- 시도별 순위
- 상위/하위 3개 지역
```

#### 프롬프트 5: 문장 생성 로직
```
데이터를 바탕으로 보고서 문장을 자동 생성해줘.

예시:
- 입력: 전국 광공업생산지수 증감률 = 2.3%
- 출력: "2025년 2분기 전국의 광공업생산지수는 전년동기대비 2.3% 증가하였다."

증가/감소/보합에 따라 문장이 달라져야 해.
```

### ✅ 결과물
- 엑셀 데이터 파싱 엔진 완성
- 정답 데이터와 수치 일치 검증 완료
- 기본 HTML 템플릿 시스템

---

## Phase 3: 웹 애플리케이션 구현
### 📅 2025년 12월 16일 ~ 17일

### 🎯 목표
Flask 기반 웹 대시보드 개발

### 💬 사용한 프롬프트들

#### 프롬프트 6: Flask 앱 구현
```
Flask 웹 애플리케이션을 만들어줘.

기능:
1. 메인 페이지에서 엑셀 파일 업로드 (드래그앤드롭)
2. 업로드된 파일에서 연도/분기 자동 감지
3. 보고서 목록 표시 (좌측 사이드바)
4. 선택한 보고서 미리보기 (우측 영역)

UI는 모던하고 깔끔하게 만들어줘.
```

#### 프롬프트 7: 템플릿 모듈화
```
Jinja2 템플릿을 각 보고서별로 분리해서 모듈화해줘.

구조:
- templates/
  - 광공업생산_template.html
  - 서비스업생산_template.html
  - 소비동향_template.html
  ...

각 템플릿에는 {{ 변수명 }} 형태로 데이터 바인딩 위치를 지정해줘.
```

#### 프롬프트 8: 의미 기반 마커 시스템
```
기존에 위치 기반(행/열 번호)으로 데이터를 추출했는데,
엑셀 구조가 변경되면 오류가 발생해.

의미 기반 마커 시스템으로 전환해줘.
예: "전국" 텍스트를 찾고, 그 오른쪽 셀에서 증감률을 읽는 방식
```

### ✅ 결과물
- Flask 웹 대시보드 완성
- 드래그 앤 드롭 파일 업로드
- 10개 부문별 보고서 템플릿 완성
- 의미 기반 마커 시스템 도입

---

## Phase 4: 고도화 및 기능 확장
### 📅 2025년 12월 18일 ~ 21일

### 🎯 목표
스키마 기반 아키텍처 전환 및 순위 시스템 구현

### 💬 사용한 프롬프트들

#### 프롬프트 9: 스키마 기반 아키텍처
```
현재 각 보고서마다 하드코딩된 셀 위치를 사용하고 있어.
이걸 JSON 스키마 기반으로 전환해줘.

스키마 예시:
{
  "report_id": "manufacturing",
  "sheet_name": "A 분석",
  "data_mappings": [
    {"field": "national_growth_rate", "row": 5, "col": 3, "type": "float"},
    {"field": "seoul_growth_rate", "row": 6, "col": 3, "type": "float"}
  ]
}

이렇게 하면 새 보고서 추가 시 스키마만 작성하면 돼.
```

#### 프롬프트 10: 가중치 기반 순위 시스템
```
17개 시도의 경제지표를 분석해서 순위를 매기는 시스템을 만들어줘.

요구사항:
1. 각 지표별 증감률 추출
2. 가중치를 적용하여 종합 순위 계산
3. 상위 3개, 하위 3개 지역 자동 선정
4. 증가 지역과 감소 지역 분리 정렬
```

#### 프롬프트 11: 동적 변수 처리
```
템플릿에서 증감 방향에 따라 다른 텍스트가 표시되도록 해줘.

예:
- 증가 시: "{{ value }}% 증가"  
- 감소 시: "{{ value }}% 감소"
- 보합 시: "전분기와 동일"

Jinja2 필터로 구현해줘.
```

### ✅ 결과물
- JSON 스키마 기반 데이터 추출 시스템
- 가중치 기반 시도별 순위 자동 계산
- 증감 방향 동적 변수 처리
- PDF 출력 기능

---

## Phase 5: 품질 개선 및 안정화
### 📅 2025년 12월 22일 ~ 23일

### 🎯 목표
템플릿 정밀도 향상 및 코드 모듈화

### 💬 사용한 프롬프트들

#### 프롬프트 12: 시트 매핑 변경 대응
```
물가동향 데이터가 기존 "E 분석" 시트에서 "E(품목성질물가)분석" 시트로 
변경됐어. 스키마를 수정해줘.

또한 앞으로 시트명이 변경될 수 있으니, fallback 시트명 목록을 
지원하도록 개선해줘.
```

#### 프롬프트 13: 코드 모듈화
```
app.py 파일이 너무 커졌어. 다음과 같이 모듈화해줘:

- config/
  - settings.py (경로, 상수)
  - reports.py (보고서 정의)
- routes/
  - main.py (메인 페이지)
  - api.py (API 엔드포인트)
  - preview.py (미리보기)
- services/
  - report_generator.py (보고서 생성 로직)
- utils/
  - filters.py (Jinja2 필터)
  - excel_utils.py (엑셀 유틸리티)
```

#### 프롬프트 14: 실업률 템플릿 구현
```
실업률 보고서 템플릿을 만들어줘.

특이사항:
- 고용률과 반대로 낮을수록 좋은 지표
- 따라서 순위 정렬이 반대 (낮은 순)
- 연령대별 분석 포함
```

### ✅ 결과물
- 10개 부문별 템플릿 완전 구현
- 시도별 순위 동적 계산 시스템
- 코드 모듈화 (config, utils, services, routes)

---

## Phase 6: 대시보드 완성
### 📅 2025년 12월 25일

### 🎯 목표
웹 대시보드 기능 완성 및 UX 개선

### 💬 사용한 프롬프트들

#### 프롬프트 15: 4개 탭 구조
```
대시보드 좌측 사이드바를 4개 탭으로 구성해줘:
1. 요약 (표지, 목차, 인포그래픽, 요약 페이지들)
2. 부문별 (광공업, 서비스업, 소비, 건설, 수출입, 물가, 고용, 인구)
3. 시도별 (17개 시도 + GRDP)
4. 통계표 (각종 통계표 + 부록)

각 탭 클릭 시 해당 보고서 목록이 표시되도록 해줘.
```

#### 프롬프트 16: 결측치 시각화
```
데이터가 없거나 비공개인 항목을 시각적으로 표시해줘.

요구사항:
- 결측치는 노란색 형광펜으로 하이라이트
- "데이터 없음" 또는 "비공개" 텍스트 표시
- 사용자가 직접 수정할 수 있도록 contenteditable 속성 추가
- 결측치 목록을 모달창으로 한눈에 확인
```

#### 프롬프트 17: 기초자료→분석표 변환
```
기초자료 수집표(.xlsx)를 업로드하면 분석표(.xlsx)를 자동 생성하는 
기능을 추가해줘.

프로세스:
1. 기초자료에서 원시 데이터 추출
2. 전년동기비 증감률 계산
3. 시도별 순위 계산
4. 분석표 양식에 맞게 출력
```

### ✅ 결과물
- 완성된 웹 대시보드 UI
- 4개 탭 구조 (요약/부문별/시도별/통계표)
- 결측치 시각적 표시 (노란색 형광펜)
- 기초자료→분석표 자동 변환

---

## Phase 7: 코드 정리 및 국제화
### 📅 2025년 12월 26일

### 🎯 목표
파일명 영문화 및 코드 정리

### 💬 사용한 프롬프트들

#### 프롬프트 18: 템플릿 파일명 영문화
```
한글 파일명이 git이나 일부 시스템에서 문제가 될 수 있어.
모든 템플릿 파일명을 영문으로 변경해줘.

변경 예시:
- 광공업생산_template.html → manufacturing_template.html
- 서비스업생산_generator.py → service_generator.py
- 소비동향_schema.json → consumption_schema.json

코드 내 참조도 모두 수정해줘.
```

#### 프롬프트 19: KOSIS GRDP 연동
```
KOSIS에서 다운로드한 GRDP 엑셀 파일을 파싱해서 
참고_GRDP 보고서에 데이터를 연동해줘.

KOSIS 파일 구조:
- 행: 지역명 (전국, 서울, 부산, ...)
- 열: 분기별 성장률 (2024.1/4, 2024.2/4, ...)

파싱해서 우리 시스템 형식으로 변환해줘.
```

### ✅ 결과물
- 템플릿 파일명 영문화 (71개 파일)
- 인포그래픽 템플릿 추가
- KOSIS GRDP 데이터 연동 모듈

---

## Phase 8: 기능 고도화 및 UX 개선
### 📅 2025년 12월 27일 ~ 30일

### 🎯 목표
이중 프로세스 구조 확립 및 출력 포맷 개선

### 💬 사용한 프롬프트들

#### 프롬프트 20: 이중 프로세스 구조
```
현재 분석표를 직접 업로드하는 방식인데, 
기초자료부터 시작하는 전체 파이프라인을 구현해줘.

프로세스 1: 기초자료 수집표 → 분석표 자동 생성
프로세스 2: 분석표 + GRDP → 지역경제동향 HTML 생성

업로드된 파일이 기초자료인지 분석표인지 자동 감지해줘.
```

#### 프롬프트 21: 한글 복붙용 HTML 내보내기
```
HWPX 파일 생성이 복잡하고 호환성 문제가 있어.
대신 한글 프로그램에 복사-붙여넣기하기 좋은 HTML을 생성해줘.

요구사항:
- 표(table)가 한글에서 잘 인식되도록
- 차트는 "[차트 영역 - 별도 이미지 삽입 필요]" 플레이스홀더로
- 페이지별 구분선 추가
- "전체 선택" 버튼 제공
```

#### 프롬프트 22: 가중치 설정 UI
```
일부 업종의 가중치가 비공개(0)로 되어있어.
이런 경우 기본값으로 대체하는 옵션을 추가해줘.

UI:
- 가중치 설정 모달창
- 업종별 현재 가중치 표시
- "비공개(0) → 기본값 대체" 토글
- 저장 시 분석표 재생성
```

#### 프롬프트 23: 자동 미리보기
```
현재는 파일 업로드 후 "미리보기" 버튼을 클릭해야 하는데,
업로드 즉시 자동으로 첫 번째 보고서 미리보기를 표시해줘.

미리보기 버튼은 제거하고, 
좌측 목록에서 보고서 클릭 시 바로 미리보기 갱신되도록 해줘.
```

#### 프롬프트 24: Chart.js 복합 차트
```
요약 페이지의 차트를 Chart.js로 구현해줘.

요구사항:
- 막대 그래프: 지수값
- 점: 증감률 (꺾은선 연결 없이 점만)
- Y축 범위를 데이터 기반으로 동적 설정
- 인쇄/PDF 저장 시 색상 유지
```

#### 프롬프트 25: 검토 완료 시 하이라이트 제거
```
결측치를 사용자가 직접 입력한 후 "검토 완료" 버튼을 누르면
노란색 하이라이트를 제거해줘.

검토 완료된 항목은 일반 텍스트처럼 표시되어야 해.
```

#### 프롬프트 26: 발표자료 업데이트
```
발표자료에 현재 프로젝트 버전 기준으로 프로세스 등과 같이 
크게 바뀐걸 위주로 업데이트 해줘
```

### ✅ 결과물
- **이중 프로세스 구조**: 프로세스 1 (기초자료→분석표), 프로세스 2 (분석표+GRDP→보고서)
- **한글 복붙용 HTML**: 복사-붙여넣기 최적화 HTML 생성
- **가중치 설정 UI**: 비공개(0) 값 자동 대체 기능
- **자동 미리보기**: 파일 업로드 시 즉시 보고서 미리보기
- **Chart.js 복합 차트**: 요약 페이지 막대+점 복합 차트

---

## 📊 프롬프트 통계

| 구분 | 수량 |
|------|------|
| 총 프롬프트 수 | 26+ 개 |
| 기능 구현 프롬프트 | 18개 |
| 버그 수정 프롬프트 | 5개 |
| 리팩토링 프롬프트 | 3개 |
| 평균 프롬프트 길이 | 약 150자 |

---

## 🎓 AI 페어 프로그래밍 팁

### 효과적인 프롬프트 작성법

1. **구체적인 요구사항 명시**
   ```
   ❌ "보고서 생성 기능 만들어줘"
   ✅ "분석표 엑셀의 A 분석 시트에서 5행 3열의 전국 증감률을 읽어서
       '전국의 광공업생산지수는 X% 증가/감소하였다' 형태로 출력해줘"
   ```

2. **예시 데이터 제공**
   ```
   입력 예시: 전국 증감률 = 2.3%
   출력 예시: "전국의 광공업생산지수는 전년동기대비 2.3% 증가하였다."
   ```

3. **단계별 접근**
   - 한 번에 큰 기능을 요청하지 않고 작은 단위로 분할
   - 각 단계별 검증 후 다음 단계 진행

4. **컨텍스트 유지**
   - 이전 대화 내용 참조
   - 기존 코드 구조와 일관성 유지 요청

5. **에러 상황 공유**
   - 에러 메시지 전체 복사
   - 재현 단계 설명

### 프로젝트 진행 시 주의사항

1. **정기적인 백업**: Git 커밋으로 진행 상황 저장
2. **정답 검증**: 생성된 결과물과 정답 이미지 비교
3. **모듈화 유지**: 코드가 커지면 적극적으로 분리
4. **문서화**: 프롬프트 히스토리 기록

---

## 🔗 관련 파일

- `PROJECT_PROGRESS.md`: 프로젝트 진행 상황 문서
- `README.md`: 프로젝트 설명서
- `correct_answer/`: 정답 이미지 폴더

---

<div align="center">

**AI 페어 프로그래밍으로 2주 만에 완성한 프로젝트** 🚀

*Claude AI + Human Collaboration*

*Last Updated: 2025년 12월 30일*

</div>

