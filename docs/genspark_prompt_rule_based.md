# Genspark 프롬프트: 규칙기반 자연어 생성 상세 슬라이드 추가

## 프롬프트 지시사항

기존 발표 자료에 "5. 핵심 기술: 규칙기반 자연어 생성" 섹션을 **대폭 확장**하여 상세 슬라이드를 추가해주세요. 현재는 간략한 개요만 있으므로, 구현 세부사항과 기술적 깊이를 보여주는 슬라이드들을 추가해야 합니다.

---

## 추가할 슬라이드 구성

### 섹션 5: 핵심 기술 - 규칙기반 자연어 생성 (기존 확장 + 신규 추가)

#### **5-1. 왜 규칙기반인가? (재구성)**
- **슬라이드 제목**: "통계 보도자료에서 규칙기반을 선택한 이유"
- **내용**:
  - 제안서 요구사항: "설명 문구 자동 생성 규칙과 LLM 활용"
  - 우리의 선택: 규칙기반 우선, LLM은 향후 과제
  - 핵심 이유 3가지:
    1. **정확성이 생명** - 0.1%의 오류도 허용 불가 (통계 보도자료 특성)
    2. **검증 가능성** - 모든 변환 과정이 규칙으로 추적 가능
    3. **일관성 보장** - 동일 입력 → 동일 출력 보장
  - LLM의 위험성:
    - Hallucination (수치 오류 가능)
    - Black Box (검증 불가)
    - 비일관적 출력

#### **5-2. 규칙기반 시스템의 3계층 구조 (신규 - 중요!)**
- **슬라이드 제목**: "3계층 아키텍처: Generator → Schema → Template"
- **시각화 필요**: 3계층 구조 다이어그램
  ```
  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
  │  Generator  │───▶│   Schema    │───▶│  Template   │
  │   (Python)  │    │   (JSON)    │    │   (HTML)    │
  └─────────────┘    └─────────────┘    └─────────────┘
       │                   │                   │
       ▼                   ▼                   ▼
   데이터 추출 규칙    데이터 구조 정의     텍스트 생성 규칙
   매핑 사전          컬럼 매핑           조건부 문장 생성
   증감률 계산        유효성 검사         포맷팅
  ```
- **설명**:
  - **Generator 계층**: 엑셀 데이터를 추출하고 변환하는 Python 코드
  - **Schema 계층**: 데이터 구조를 정의하는 JSON 스키마
  - **Template 계층**: Jinja2 템플릿으로 최종 문장 생성
- **장점**: 각 계층이 독립적 → 유지보수 용이, 확장 가능

#### **5-3. Generator 계층 상세: 데이터 추출 규칙 (신규 - 상세!)**
- **슬라이드 제목**: "Generator: 원본 데이터를 의미있는 구조로 변환"

**3-1. 매핑 규칙 (Mapping Dictionary)**
- **코드 예시 포함**:
  ```python
  # 업종명 매핑 (28개)
  INDUSTRY_NAME_MAP = {
      "전자 부품, 컴퓨터, 영상, 음향 및 통신장비 제조업": "반도체·전자부품",
      "의료, 정밀, 광학 기기 및 시계 제조업": "의료·정밀",
      # ... 28개 업종
  }
  
  # 지역명 표준화 (17개 시도)
  REGION_DISPLAY_MAP = {
      "전국": "전 국",  # 공식 표기 (띄어쓰기 포함)
      "서울": "서 울",
      # ... 17개 시도
  }
  ```
- **효과**: 
  - 엑셀 원본: "전자 부품, 컴퓨터..." (31자)
  - 보도자료: "반도체·전자부품" (7자)
  - **일관된 용어 사용 보장**

**3-2. 컬럼 인덱스 매핑**
- **설명**: 엑셀 시트마다 컬럼 구조가 다름 → 명시적 매핑 필요
- **코드 예시**:
  ```python
  QUARTER_COLS = {
      'A 분석': {  # 광공업생산
          '2025_2Q': 21,
          '2024_2Q': 17,
          # ... 각 분기별 컬럼 번호
      },
      'B 분석': {  # 서비스업생산
          '2025_2Q': 20,
          # ... (다른 컬럼 구조)
      }
  }
  ```
- **중요성**: 잘못된 컬럼 참조 → 수치 오류 → 검증 가능성 확보

**3-3. 증감률 계산 규칙**
- **수식 공개**:
  ```
  증감률 = (당기지수 - 전년동분기지수) / 전년동분기지수 × 100
  
  기여도 = (당기지수 - 전년동분기지수) / 전국전년동분기지수 × 가중치/10000 × 100
  ```
- **코드 예시**:
  ```python
  current_index = 108.2  # 2025.2/4
  prev_year_index = 104.9  # 2024.2/4
  
  growth_rate = ((current_index - prev_year_index) / prev_year_index) * 100
  growth_direction = "증가" if growth_rate > 0 else "감소"
  ```
- **자동화**: 증감 방향도 자동 판단

**3-4. 순위/정렬 규칙**
- **코드 예시**:
  ```python
  # 증가/감소 지역 자동 분류
  increase_regions = sorted(
      [r for r in regions if r["growth_rate"] > 0],
      key=lambda x: x["growth_rate"],
      reverse=True  # 높은 순
  )
  
  decrease_regions = sorted(
      [r for r in regions if r["growth_rate"] < 0],
      key=lambda x: x["growth_rate"]  # 낮은 순 (큰 감소 먼저)
  )
  ```
- **자동화된 판단**:
  - `growth_rate > 0` → 증가 지역 리스트
  - `growth_rate < 0` → 감소 지역 리스트
  - 각각 자동 정렬

#### **5-4. Template 계층 상세: 텍스트 생성 규칙 (신규 - 상세!)**
- **슬라이드 제목**: "Template: 데이터를 자연어 문장으로 변환"

**4-1. 조건부 문장 생성 (Jinja2 템플릿)**
- **템플릿 예시**:
  ```html
  {{ region }}의 광공업생산은 전년동분기대비 
  {{ "%.1f"|format(growth_rate) }}% 
  {% if growth_rate > 0 %}증가{% else %}감소{% endif %}하였다.
  ```
- **입력 데이터**: `{"region": "서울", "growth_rate": 3.2}`
- **생성 결과**: "서울의 광공업생산은 전년동분기대비 3.2% 증가하였다."
- **만약 데이터가** `{"region": "부산", "growth_rate": -2.5}` **라면?**
  - 자동으로 "부산의 광공업생산은 전년동분기대비 2.5% 감소하였다." 생성

**4-2. 증감 방향 자동 판단**
- **규칙 테이블**:
  | 조건 | CSS 클래스 | 표시 텍스트 |
  |------|-----------|-----------|
  | `value > 0` | `.increase` | "증가" / "▲" |
  | `value < 0` | `.decrease` | "감소" / "▼" |
  | `value == 0` | `.same` | "보합" / "-" |
- **자동 스타일링**: 값에 따라 색상도 자동 변경 (증가=빨강, 감소=파랑)

**4-3. 반복 패턴 자동화**
- **템플릿 예시** (상위 3개 지역 자동 나열):
  ```html
  {% for region in top3_increase_regions %}
  ·{{ region.region }}({{ "%.1f"|format(region.growth_rate) }}%): 
    {% for industry in region.industries[:3] %}
      {{ industry.name }}({{ "%.1f"|format(industry.growth_rate) }}%)
      {% if not loop.last %}, {% endif %}
    {% endfor %}
  {% endfor %}
  ```
- **생성 결과 예시**:
  ```
  ·충남(8.5%): 반도체·전자부품(12.3%), 자동차·트레일러(7.8%), 의약품(5.2%)
  ·경북(7.2%): 의약품(9.1%), 기타기계장비(6.5%), 화학물질(4.3%)
  ·충북(6.1%): 반도체·전자부품(10.2%), 의약품(8.7%), 자동차·트레일러(3.9%)
  ```

**4-4. 결측치 처리 규칙**
- **플레이스홀더 매크로**:
  ```html
  {% macro val(value, format="%.1f") %}
      {% if value is none or value == '' %}
          <span class="editable-placeholder">[  ]</span>
      {% else %}
          {{ format|format(value) }}
      {% endif %}
  {% endmacro %}
  ```
- **처리 방식**:
  - 데이터 없음 → 노란색 배경의 `[  ]` 표시
  - 담당자가 직접 입력 가능 (contenteditable)
  - 잘못된 값 자동 생성 방지

#### **5-5. 전체 데이터 흐름도 (신규 - 중요!)**
- **슬라이드 제목**: "규칙기반 자연어 생성의 전체 흐름"
- **시각화 필요**: 데이터 흐름 다이어그램
  ```
  [엑셀 데이터]
       │
       ▼
  ┌─────────────────┐
  │   Generator     │  ① 매핑: 업종명/지역명 표준화
  │   (Python)      │  ② 계산: 증감률, 기여도 자동 계산
  │                 │  ③ 정렬: 증가/감소 분류, 순위 결정
  └────────┬────────┘
           │
           ▼
  ┌─────────────────┐
  │  Data Dict      │  {
  │  (Python Dict)  │    "nationwide_data": {"growth_rate": 3.2},
  │                 │    "regional_data": {"increase_regions": [...]}
  └────────┬────────┘  }
           │
           ▼
  ┌─────────────────┐
  │   Template      │  ④ 조건: 값에 따라 "증가"/"감소" 선택
  │   (Jinja2)      │  ⑤ 포맷: 소수점, 단위 등 표시 형식
  │                 │  ⑥ 반복: 리스트 데이터 반복 출력
  └────────┬────────┘
           │
           ▼
  [HTML 보도자료]
  "충남(8.5%)은 반도체·전자부품 등의 생산이 늘어 증가"
  ```
- **6단계 규칙 적용 과정**:
  1. 매핑 규칙: 원본 데이터 표준화
  2. 계산 규칙: 수치 자동 계산
  3. 정렬 규칙: 의미 있는 순서로 정리
  4. 조건 규칙: 값에 따라 표현 선택
  5. 포맷 규칙: 표시 형식 결정
  6. 반복 규칙: 리스트 자동 생성

#### **5-6. LLM과의 상세 비교 (기존 확장)**
- **슬라이드 제목**: "규칙기반 vs LLM: 왜 규칙기반이 통계 보도자료에 적합한가?"
- **비교 표** (더 상세하게):
  | 기준 | 규칙기반 | LLM |
  |------|---------|-----|
  | **수치 정확도** | ✅ 100% (데이터가 맞으면 결과도 맞음) | ❌ Hallucination 위험 (수치 오류 가능) |
  | **검증가능성** | ✅ 로직이 명시적 (코드로 추적) | ❌ Black Box (왜 이렇게 했는지 모름) |
  | **일관성** | ✅ 동일 입력 → 동일 출력 | ❌ 매번 다른 표현 가능 |
  | **비용** | ✅ 무료 (로컬 실행) | ❌ API 비용 발생 (토큰당 과금) |
  | **속도** | ✅ 밀리초 단위 (즉시 생성) | ❌ 초 단위 (API 호출 대기) |
  | **유연성** | ❌ 새 패턴 추가 시 코드 수정 필요 | ✅ 프롬프트만 변경 |
  | **예측 가능성** | ✅ 항상 예측 가능 | ❌ 결과 예측 불가 |
- **핵심 메시지**:
  ```
  통계 보도자료 = 정확한 수치 + 정해진 서식 + 반복 패턴
  → 규칙기반이 최적
  → LLM은 "해설/분석" 문구에만 적합 (향후 과제)
  ```
- **적용 예시**:
  - ✅ 규칙기반 적합: "서울의 광공업생산은 전년동분기대비 3.2% 증가"
  - 🤖 LLM 적합 (향후): "이번 분기 서울의 생산 증가는 반도체 수출 호조에 기인한 것으로 분석됨"

#### **5-7. 구현 통계 및 코드 규모 (신규)**
- **슬라이드 제목**: "규칙기반 시스템 구현 현황"
- **통계 표**:
  | 항목 | 수량 | 설명 |
  |------|------|------|
  | **Generator 모듈** | 15개 | Python 데이터 추출 코드 |
  | **HTML 템플릿** | 71개 | Jinja2 템플릿 파일 |
  | **JSON 스키마** | 39개 | 데이터 구조 정의 |
  | **매핑 사전 항목** | 100+개 | 업종명, 지역명, 표현 변환 |
  | **조건문 규칙** | 50+개 | if/else 분기 규칙 |
  | **총 코드 라인** | 15,000+줄 | Python + HTML + JSON |
- **설명**: 규칙의 양과 복잡도를 보여줌 → 단순한 템플릿이 아님

#### **5-8. 실제 생성 예시 (신규 - 데모용!)**
- **슬라이드 제목**: "실제 데이터로 본 규칙기반 자연어 생성"
- **Before (엑셀 원본 데이터)**:
  ```
  지역: "경기"
  업종명: "전자 부품, 컴퓨터, 영상, 음향 및 통신장비 제조업"
  당기지수: 108.2
  전년동분기지수: 104.9
  ```
- **규칙 적용 과정**:
  1. 매핑: "경기" → "경 기" (공식 표기), "전자 부품..." → "반도체·전자부품"
  2. 계산: (108.2 - 104.9) / 104.9 × 100 = 3.14% → 3.1% (반올림)
  3. 조건: 3.1% > 0 → "증가"
  4. 템플릿: "{지역}의 {지표}은 전년동분기대비 {증감률}% {방향}하였다"
- **After (생성된 문장)**:
  ```
  경기의 광공업생산은 전년동분기대비 3.1% 증가하였다.
  
  상세: 경기(3.1%): 반도체·전자부품(12.3%), 자동차·트레일러(7.8%)
  ```
- **다양한 경우의 수 보여주기**:
  - 만약 증감률이 -2.5%라면? → "감소하였다"로 자동 변경
  - 만약 데이터가 없다면? → `[  ]` 플레이스홀더 표시

#### **5-9. 확장 가능성과 모듈화 (신규)**
- **슬라이드 제목**: "확장 가능한 프레임워크 설계"
- **모듈화 구조**:
  ```
  새 보도자료 추가 시:
  
  1. 템플릿 작성 (HTML 서식)
     → templates/new_report_template.html
  
  2. 생성기 작성 (데이터 추출)
     → templates/new_report_generator.py
  
  3. 스키마 정의 (데이터 구조)
     → schemas/new_report_schema.json
  
  → 기존 시스템 수정 없이 확장 가능!
  ```
- **현재 적용 현황**:
  - 50개 항목(78페이지) = 45개 템플릿 × 15개 생성기
  - 각각 독립적으로 수정 가능
- **향후 확장**:
  - 인구동향 보도자료: 새 템플릿만 추가
  - 물가동향 보도자료: 새 템플릿만 추가
  - 핵심 엔진은 재사용

---

## 시각화 요구사항

### 필수 다이어그램
1. **3계층 구조 다이어그램** (5-2 슬라이드)
   - Generator → Schema → Template 흐름
   - 각 계층의 역할과 관계 명확히 표시

2. **전체 데이터 흐름도** (5-5 슬라이드)
   - 엑셀 → Generator → Data Dict → Template → HTML
   - 6단계 규칙 적용 과정 시각화

3. **비교 차트** (5-6 슬라이드)
   - 규칙기반 vs LLM 비교 (체크/엑스 표시)
   - 또는 레이더 차트

### 코드 예시
- **Python 코드**: 실제 Generator 코드 일부 (간단한 예시)
- **HTML/Jinja2 템플릿**: 조건문 포함 템플릿 예시
- **생성 전후 비교**: 데이터 → 문장 변환 과정

---

## 톤 및 스타일

- **기술적 깊이**: 구현 세부사항을 구체적으로 설명
- **시각적 설명**: 코드 예시와 다이어그램으로 이해도 향상
- **실무 중심**: 실제 사용되는 규칙과 코드 보여주기
- **비교 강조**: LLM과의 차이점을 명확히 (왜 규칙기반인가?)
- **확장성 강조**: 모듈화된 구조의 장점

---

## 추가 참고사항

### 핵심 메시지 (반복 강조)
1. **"규칙기반 = 정확성"** - 통계 보도자료에서 가장 중요
2. **"검증 가능한 로직"** - 모든 변환 과정이 추적 가능
3. **"확장 가능한 구조"** - 새로운 보도자료 추가 용이

### 발표 시 강조 포인트
- 단순한 템플릿이 아닌 **복잡한 규칙 시스템**
- **15,000줄 이상의 코드**로 구현
- 각 규칙이 **명시적으로 정의**되어 있음
- LLM의 hallucination 위험을 **완전히 배제**

---

## 최종 체크리스트

- [ ] 5-1: 왜 규칙기반인가? (재구성)
- [ ] 5-2: 3계층 구조 다이어그램 (신규)
- [ ] 5-3: Generator 계층 상세 (신규 - 코드 예시 포함)
- [ ] 5-4: Template 계층 상세 (신규 - 템플릿 예시 포함)
- [ ] 5-5: 전체 데이터 흐름도 (신규)
- [ ] 5-6: LLM과의 상세 비교 (확장)
- [ ] 5-7: 구현 통계 (신규)
- [ ] 5-8: 실제 생성 예시 (신규 - 데모용)
- [ ] 5-9: 확장 가능성 (신규)

**총 예상 슬라이드 수**: 기존 5장 섹션 약 8개 → 확장 후 약 17개 슬라이드


