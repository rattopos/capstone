# 마크다운 파일 프린트카페 출력 가이드

## 개요

프린트카페에서 마크다운 파일을 출력하기 위한 완전한 가이드입니다. 프린트카페 컴퓨터에는 마크다운을 읽을 수 있는 프로그램이 없고, 개인정보 보호를 위해 웹 기반 편집기에 업로드하고 싶지 않은 경우를 위한 솔루션입니다.

## 해결 방법

**마크다운 파일을 HTML로 변환한 후 HTML 파일을 브라우저로 열어 인쇄**하는 방법을 사용합니다.

### 장점

1. ✅ 개인정보 보호: 로컬에서 변환하므로 외부 서버에 업로드하지 않음
2. ✅ 프린트카페 호환: HTML 파일은 모든 브라우저에서 열 수 있음
3. ✅ A4 최적화: 페이지 레이아웃이 A4 용지에 맞게 최적화됨
4. ✅ 페이지 나누기 제어: 표, 그림, 제목이 페이지 중간에 끊기지 않도록 처리
5. ✅ 양면 인쇄 지원: 좌철 기준으로 여백 자동 조정

## 사용 방법

### 1. 변환 스크립트 실행

프로젝트 루트 디렉토리에서 다음 명령어를 실행합니다:

```bash
# 기본 사용 (docs/PRESENTATION.md를 변환)
python scripts/md_to_print_html.py

# 특정 파일 변환
python scripts/md_to_print_html.py docs/PRESENTATION.md

# 출력 파일명 지정
python scripts/md_to_print_html.py docs/PRESENTATION.md output.html

# 기본 사용 (Mermaid 다이어그램은 코드 블록으로 표시됨)
python scripts/md_to_print_html.py docs/PRESENTATION.md
```

### 2. 생성된 HTML 파일 확인

스크립트 실행 후 다음 파일이 생성됩니다:

- **HTML 파일**: `입력파일명.print.html` (예: `PRESENTATION.print.html`)

### 3. HTML 파일을 프린트카페로 전송

생성된 HTML 파일과 이미지 디렉토리를 USB 드라이브나 클라우드 스토리지에 저장하여 프린트카페 컴퓨터로 가져옵니다.

**참고**: 
- HTML 파일 하나만 생성되며, 모든 내용이 포함됩니다
- Mermaid 다이어그램은 코드 블록(텍스트)으로 표시됩니다

### 4. 프린트카페에서 출력

1. HTML 파일을 더블클릭하여 기본 브라우저로 엽니다 (Chrome, Edge, Firefox 등 모두 가능)
2. 브라우저에서 **Ctrl+P** (또는 **Cmd+P** on Mac)를 눌러 인쇄 대화상자를 엽니다
3. 인쇄 설정:
   - **용지 크기**: A4
   - **여백**: 기본값 또는 사용자 정의 (스크립트가 자동으로 최적화함)
   - **방향**: 세로 (Portrait)
   - **양면 인쇄**: 원하는 경우 "양면 인쇄" 또는 "긴 가장자리로 넘김" 선택 (좌철 기준으로 여백이 자동 조정됨)
   - **색상**: 원하는 경우 그레이스케일 (자동으로 적용되도록 설정됨)
4. **인쇄** 버튼 클릭

## HTML 변환 설정

변환된 HTML 파일은 다음 설정을 포함합니다:

### 페이지 설정

- **용지 크기**: A4 (210mm × 297mm)
- **여백**: 
  - 상: 20mm
  - 하: 20mm
  - 좌 (홀수 페이지): 20mm
  - 우 (홀수 페이지): 15mm
  - 좌 (짝수 페이지): 15mm
  - 우 (짝수 페이지): 20mm
  - (양면 인쇄 시 좌철 기준으로 자동 조정)

### 글꼴 설정

- **기본 글꼴**: 나눔고딕 12pt
- **줄 간격**: 1.7
- **제목 크기**:
  - H1: 20pt
  - H2: 16pt
  - H3: 14pt
  - H4: 13pt
  - H5, H6: 12pt

### 페이지 나누기 제어

다음 요소들은 페이지 중간에 끊기지 않도록 자동 처리됩니다:

- ✅ **제목** (H1-H6): 제목 뒤에 페이지 나누기 방지
- ✅ **표**: 표 전체가 한 페이지에 들어가도록 처리
- ✅ **코드 블록**: 코드 블록(Mermaid 다이어그램 포함)이 페이지 중간에 끊기지 않음
- ✅ **이미지**: 이미지가 페이지 경계에서 끊기지 않음
- ✅ **인용문**: 인용문이 페이지 중간에 끊기지 않음

### 문단 처리

- **Orphans/Widows 제어**: 문단의 첫 줄이나 마지막 줄이 페이지 끝에서 고립되지 않도록 처리 (최소 3줄 유지)
- **양쪽 정렬**: 문단 텍스트가 양쪽 정렬됨

## Mermaid 다이어그램 처리

마크다운 파일에 Mermaid 다이어그램이 포함된 경우, **코드 블록(텍스트)으로 표시**됩니다.

### 표시 방식

- Mermaid 다이어그램은 이미지로 변환되지 않고, 원본 코드가 코드 블록으로 표시됩니다
- "Mermaid 다이어그램" 라벨과 함께 파란색 테두리가 있는 코드 블록으로 표시됩니다
- CLI에서 보는 것처럼 텍스트 형태로 출력되므로 화질 문제가 없습니다

### 장점

- ✅ 고화질 문제 없음: 텍스트 기반이므로 선명하게 출력됩니다
- ✅ 파일 크기 작음: 이미지 파일이 생성되지 않아 HTML 파일이 작습니다
- ✅ 편집 가능: 필요시 코드 블록의 텍스트를 수정할 수 있습니다

## 트러블슈팅


### 문제: 페이지 레이아웃이 깨짐

**원인**: 브라우저의 인쇄 미리보기 설정이 잘못됨

**해결**: 
1. 브라우저 인쇄 대화상자에서 "추가 설정" 확인
2. "배경 그래픽" 옵션 활성화
3. 여백을 "기본값" 또는 "최소"로 설정

### 문제: 표나 그림이 페이지 중간에 끊김

**원인**: 브라우저의 인쇄 엔진이 CSS `page-break-inside: avoid`를 완전히 지원하지 않음

**해결**:
1. 브라우저 인쇄 미리보기에서 확인
2. 필요시 수동으로 페이지 나누기 위치 조정
3. 또는 HTML 파일의 CSS를 직접 수정 (고급 사용자)


## 프롬프트 (AI에게 요청할 때 사용)

다음 프롬프트를 사용하여 마크다운을 프린트카페 출력용 HTML로 변환할 수 있습니다:

```
마크다운 파일을 프린트카페에서 출력하기 위한 HTML로 변환해주세요.

요구사항:
1. A4 용지 크기 (210mm × 297mm, 세로 방향)
2. 적절한 여백 (상하 20mm, 좌우 15-20mm, 양면 인쇄 시 좌철 기준으로 자동 조정)
3. 페이지 나누기 제어:
   - 제목(H1-H6) 뒤에 페이지 나누기 방지
   - 표, 코드 블록, 이미지, 인용문이 페이지 중간에 끊기지 않도록 처리
   - 문단의 첫 줄/마지막 줄 고립 방지 (orphans/widows 최소 3줄)
4. 글꼴: 나눔고딕 12pt (기본), 제목은 16-20pt
5. Mermaid 다이어그램은 코드 블록(텍스트)으로 표시
6. 인쇄 시 그레이스케일 자동 적용
7. 개인정보 보호: 모든 데이터는 로컬에서 처리 (외부 서버 업로드 없음)

출력:
- HTML 파일 하나로 모든 내용 포함
- 브라우저에서 열어 바로 인쇄 가능
- 양면 인쇄 지원 (좌철 기준 여백 자동 조정)
- Mermaid 다이어그램은 코드 블록으로 표시 (이미지 변환 없음)
```

## 참고사항

- 변환 스크립트는 `scripts/md_to_print_html.py`에 위치합니다
- 기존 변환 예시는 `docs/PRESENTATION_PRINT.html`을 참고하세요
- 스크립트는 Python 3.6+ 환경에서 동작합니다
- 필요한 라이브러리: `pathlib` (Python 표준 라이브러리)
- 추가 설치 불필요: Mermaid 다이어그램은 코드 블록으로 표시되므로 별도 변환 도구가 필요하지 않습니다

## 추가 기능 제안

향후 추가할 수 있는 기능:

- [ ] PDF 직접 생성 (브라우저 인쇄 단계 생략)
- [ ] 사용자 정의 여백 설정
- [ ] 머리글/바닥글 추가 (페이지 번호, 문서 제목 등)
- [ ] 워터마크 추가
- [ ] 인쇄 전 미리보기 개선

